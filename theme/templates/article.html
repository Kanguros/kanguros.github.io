{% from 'macros.j2' import article_header %}

{% extends "base.html" %}
{% block title %}
{{ SITENAME }} - {{ article.title|striptags }}
{% endblock %}

{% block head %}
{{ super() }}

{% for keyword in article.keywords %}
<meta name="keywords" content="{{keyword}}">
{% endfor %}

{% if article.headline %}
<meta name="description" content="{{ article.headline }}">
{% elif article.summary %}
<meta name="description" content="{{ article.summary|striptags|truncate(140) }}">
{% endif %}

{% for tag in article.tags %}
<meta name="tags" content="{{tag}}">
{% endfor %}
{% endblock %}


{% block opengraph %}
{{ super() }}
<meta property="og:type" content="article">
<meta property="og:url" content="{{ SITEURL }}/{{ article.url }}">
<meta property="og:title" content="{{ article.title|striptags }}">
<meta property="article:published_time" content="{{ article.date }}">
{% if article.headline %}
<meta property="og:description" content="{{ article.headline }}">
{% elif article.summary %}
<meta property="og:description" content="{{ article.summary|striptags|truncate(140) }}">
{% endif %}

{% if article.og_image|lower|truncate(4, True, '') == "http" %}
<meta property="og:image" content="{{ article.og_image }}">
{% elif article.header_cover %}
<meta property="og:image" content="{{ SITEURL }}{{ article.header_cover }}">
{% elif HEADER_COVER %}
<meta property="og:image" content="{{ SITEURL }}/{{ HEADER_COVER }}">
{% else %}
<meta property="og:image" content="{{ SITEURL }}/{{ THEME_STATIC_DIR }}/images/post-bg.jpg">
{% endif %}
{% endblock %}

{% block header %}
{{ article_header(article) }}
{% endblock header %}

{% block content %}
<article>
    {{ article.content }}
</article>
{% include 'similar_posts.html' %}
{% endblock content %}
